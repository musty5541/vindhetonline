<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plaats een advertentie</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Plaats een advertentie</h1>
  <p>Hier kun je jouw advertentie toevoegen.</p>

  <form id="advertentieForm">
    
    <input type="number" id="price" name="price" require<label for="photo">Fotoğraf Yükle:</label><br>
<input type="file" id="photo" accept="image/*"><br><br>
<img id="preview" src="#" alt="Önizleme" style="max-width: 200px; display:none;"><br><br>
<script>
  document.getElementById("photos").addEventListener("change", function (event) {
    const files = event.target.files;
    const previewContainer = document.getElementById("previewContainer");
    previewContainer.innerHTML = ""; // Öncekileri temizle

    if (files.length > 15) {
      alert("En fazla 15 fotoğraf yükleyebilirsiniz.");
      event.target.value = ""; // dosya seçimini sıfırla
      return;
    }

    for (let i = 0; i < files.length; i++) {
      const reader = new FileReader();
      reader.onload = function (e) {
        const img = document.createElement("img");
        img.src = e.target.result;
        img.style.maxWidth = "100px";
        img.style.maxHeight = "100px";
        previewContainer.appendChild(img);
      };
      reader.readAsDataURL(files[i]);
    }
  });

  document.getElementById("advertentieForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const title = document.getElementById("title").value;
    const description = document.getElementById("description").value;
    const price = document.getElementById("price").value;
    const photoInput = document.getElementById("photos");

    const files = photoInput.files;
    if (files.length === 0) {
      alert("Lütfen en az bir fotoğraf yükleyin.");
      return;
    }
    if (files.length > 15) {
      alert("En fazla 15 fotoğraf yükleyebilirsiniz.");
      return;
    }

    const imagePromises = [];
    for (let i = 0; i < files.length; i++) {
      imagePromises.push(new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = function (e) {
          resolve(e.target.result);
        };
        reader.onerror = reject;
        reader.readAsDataURL(files[i]);
      }));
    }

    Promise.all(imagePromises).then((images) => {
      const newAd = { title, description, price, images };
      let ads = JSON.parse(localStorage.getItem("advertenties")) || [];
      ads.push(newAd);
      localStorage.setItem("advertenties", JSON.stringify(ads));
      alert("İlan başarıyla kaydedildi!");
      window.location.href = "listings.html";
    });
  });
</script>
   

    <button type="submit">İlanı Gönder</button>
  </form>

  <p><a href="index.html">← Terug naar Home</a></p>
<script>
  // Önizleme resmi göster
  document.getElementById("photo").addEventListener("change", function (event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        document.getElementById("preview").src = e.target.result;
        document.getElementById("preview").style.display = "block";
      };
      reader.readAsDataURL(file);
    }
  });

  // Form gönderimi
  document.getElementById("advertentieForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const title = document.getElementById("title").value;
    const description = document.getElementById("description").value;
    const price = document.getElementById("price").value;
    const photoInput = document.getElementById("photo");

    if (photoInput.files.length > 0) {
      const reader = new FileReader();
      reader.onload = function (event) {
        const image = event.target.result;

        const newAd = { title, description, price, image };
        let ads = JSON.parse(localStorage.getItem("advertenties")) || [];
        ads.push(newAd);
        localStorage.setItem("advertenties", JSON.stringify(ads));

        alert("İlan başarıyla kaydedildi!");
        window.location.href = "listings.html";
      };
      reader.readAsDataURL(photoInput.files[0]);
    } else {
      alert("Lütfen bir resim yükleyin!");
    }
  });
</script>
 
   

</body>
</html>

